var M=Object.defineProperty;var P=(t,e,i)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var o=(t,e,i)=>P(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();const b=document.querySelector(".game-window"),u=document.querySelector(".canvas"),m=u.getContext("2d"),w=b.getBoundingClientRect();u.height=w.height;u.width=w.width;const f=10,d=u.width,c=u.height,G=8,x=64,F=128,v=256,O=200,g=150,T=50;class S{constructor(e,i,n,s){o(this,"x");o(this,"y");o(this,"dx");o(this,"dy");o(this,"direction");o(this,"w");o(this,"h");o(this,"img");o(this,"loaded");o(this,"gameDy");this.x=e,this.y=i,this.dx=10,this.dy=10,this.w=64,this.h=64,this.gameDy=f,this.direction=n,this.loaded=!1,this.img=new Image,this.img.src=s,this.img.onload=()=>{this.loaded=!0,this.draw()}}draw(){this.loaded&&m.drawImage(this.img,this.x,this.y,this.w,this.y)}update(){this.y+=this.gameDy}}class B extends S{constructor(i,n,s,r,a,h){super(i,n,s,r);o(this,"startPos");o(this,"endPos");this.startPos=a,this.endPos=h}oscillate(){this.direction==="horizontal"?(this.x>=this.endPos?this.dx=-Math.abs(this.dx):this.x<=this.startPos&&(this.dx=Math.abs(this.dx)),this.x+=this.dx):(this.y>=this.endPos?this.dy=-Math.abs(this.dy):this.y<=this.startPos&&(this.dy=Math.abs(this.dy)),this.y+=this.dy)}}class C extends B{constructor(i,n,s,r,a,h){super(i,n,s,r,a,h);o(this,"spriteWidth");o(this,"spriteHeight");o(this,"currentFrame");o(this,"totalFrame");this.spriteHeight=166,this.spriteWidth=164.5,this.currentFrame=0,this.totalFrame=5,this.h=32,this.w=32,this.dx=1}draw(){this.loaded&&m.drawImage(this.img,this.currentFrame*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y,this.w,this.h),this.currentFrame=(this.currentFrame+1)%this.totalFrame}}function l(t){return Math.floor(Math.random()*t)}function p(){return l(100)<50}function y(){const t=l(d/2),i=d/4+t+O;return i>d*3/4?i-d/2:i}class W{constructor(e,i,n,s){o(this,"x");o(this,"y");o(this,"dx");o(this,"dy");o(this,"w");o(this,"h");o(this,"img");o(this,"type");o(this,"loaded");this.x=e,this.y=i,this.dx=0,this.dy=f,this.w=G,this.h=x,this.type=n,this.loaded=!1,this.img=new Image,this.img.src=s,this.img.onload=()=>{this.loaded=!0,this.draw()}}updateImage(e){this.img.src=e}draw(){this.loaded&&m.drawImage(this.img,this.x,this.y,this.w,this.h)}moveInY(){this.y+=this.dy}moveInX(){this.x+=this.dx}}function L(){const t=l(2);let e=0;switch(t){case 0:e=x;break;case 1:e=F;break;case 2:e=v;break}return e}function D(t){const e=[];for(let i=0;i<t;++i){const n=y(),s=new W(n,0,"normal","./images/normal-wall.png"),r=L(),a=c-r-g*(i+1);s.y=a,e.push(s)}return e}function A(t){const e=c/(t+1),i=[];for(let n=0;n<t;++n){const s=y(),r=s+T,a=s+l(50),h=new C(a,0,"horizontal","./images/saw-blade.png",s,r),_=c-h.h-e*(n+1);h.y=_,h.dx=p()?1:-1,h.dy=p()?1:-1,h.y>0&&i.push(h)}return i}function N(t){if(t[t.length-1].y>g){const e=L(),i=t[t.length-1].y-g-e,n=new W(y(),i,"normal","./images/normal-wall.png");n.h=e,t.push(n)}t.forEach(e=>{e.y+=f,e.y>c&&(t.shift(),t[0]&&(t[0].y+=10,t[0].draw()))})}function q(t){if(t.forEach(e=>{e.y+=f,e.y>c&&t.shift()}),t.length===0){const e=A(l(5));e.reverse(),e.forEach(i=>{i.y*=-1}),t.push(...e)}}const R=document.querySelector(".game-window"),E=D(4),H=A(l(4));function I(){m.clearRect(0,0,d,c),E.forEach(t=>t.draw()),H.forEach(t=>{t.draw(),t.oscillate()}),requestAnimationFrame(I)}R.addEventListener("click",()=>{m.clearRect(0,0,d,c),N(E),q(H)});I();
